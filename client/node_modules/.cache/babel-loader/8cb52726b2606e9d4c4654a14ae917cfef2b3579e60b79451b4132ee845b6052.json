{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Selva\\\\OneDrive\\\\Desktop\\\\New folder (2)\\\\client\\\\src\\\\components\\\\EditProfile.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction EditProfile() {\n  _s();\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  const [profileData, setProfileData] = useState({\n    name: '',\n    dept: '',\n    year: '',\n    sec: '',\n    email: '',\n    rollno: '',\n    roomno: '',\n    wardenname: ''\n  });\n  const [profileImage, setProfileImage] = useState(null);\n  const [errorMessage, setErrorMessage] = useState('');\n  useEffect(() => {\n    const fetchProfile = async () => {\n      const token = localStorage.getItem('token');\n      if (!token) {\n        console.error('No token found, redirecting to login...');\n        navigate('/login');\n        return;\n      }\n      try {\n        console.log(`Fetching profile for ID: ${id}`);\n        const response = await axios.get(`http://localhost:5000/api/profile/${id}`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        console.log('Profile fetched:', response.data);\n        setProfileData(response.data.Details);\n      } catch (error) {\n        var _error$response;\n        console.error('Error fetching profile details:', ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data) || error.message);\n        setErrorMessage('Failed to fetch profile details. Please try again.');\n      }\n    };\n    fetchProfile();\n  }, [id, navigate]);\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setProfileData(prevData => ({\n      ...prevData,\n      [name]: value\n    }));\n  };\n  const handleImageChange = e => {\n    setProfileImage(e.target.files[0]);\n    console.log('Selected file:', e.target.files[0]);\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    const token = localStorage.getItem('token');\n    if (!token) {\n      console.error('No token found, redirecting to login...');\n      navigate('/login');\n      return;\n    }\n    const formData = new FormData();\n    formData.append('profileImage', profileImage);\n    Object.keys(profileData).forEach(key => {\n      formData.append(key, profileData[key]);\n    });\n    try {\n      console.log('Updating profile...');\n      const response = await axios.put(`http://localhost:5000/api/EditProfile/${id}`, formData, {\n        headers: {\n          Authorization: `Bearer ${token}`,\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n      console.log('Profile updated:', response.data);\n      alert('Profile updated successfully!');\n      navigate(`/profile/${id}`);\n    } catch (error) {\n      var _error$response2;\n      console.error('Error updating profile:', ((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.data) || error.message);\n      setErrorMessage('Failed to update profile. Please try again.');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      maxWidth: '600px',\n      margin: '0 auto',\n      padding: '1em'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Edit Profile\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }, this), errorMessage && /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: 'red'\n      },\n      children: errorMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 30\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      encType: \"multipart/form-data\",\n      children: [Object.keys(profileData).map(key => /*#__PURE__*/_jsxDEV(\"label\", {\n        style: {\n          display: 'block',\n          marginBottom: '1em'\n        },\n        children: [key.charAt(0).toUpperCase() + key.slice(1), \":\", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: key,\n          value: profileData[key],\n          onChange: handleChange,\n          required: true,\n          style: {\n            width: '100%',\n            padding: '0.5em',\n            marginTop: '0.5em'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 25\n        }, this)]\n      }, key, true, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 21\n      }, this)), /*#__PURE__*/_jsxDEV(\"label\", {\n        style: {\n          display: 'block',\n          marginBottom: '1em'\n        },\n        children: [\"Profile Image:\", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          name: \"profileImage\",\n          onChange: handleImageChange,\n          style: {\n            marginTop: '0.5em'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        style: {\n          padding: '0.5em 1em'\n        },\n        children: \"Save Changes\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 94,\n    columnNumber: 9\n  }, this);\n}\n_s(EditProfile, \"4Th+WQXjwn/DZrBUAc2Lb68mm/E=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = EditProfile;\nexport default EditProfile;\nvar _c;\n$RefreshReg$(_c, \"EditProfile\");","map":{"version":3,"names":["React","useEffect","useState","axios","useParams","useNavigate","jsxDEV","_jsxDEV","EditProfile","_s","id","navigate","profileData","setProfileData","name","dept","year","sec","email","rollno","roomno","wardenname","profileImage","setProfileImage","errorMessage","setErrorMessage","fetchProfile","token","localStorage","getItem","console","error","log","response","get","headers","Authorization","data","Details","_error$response","message","handleChange","e","value","target","prevData","handleImageChange","files","handleSubmit","preventDefault","formData","FormData","append","Object","keys","forEach","key","put","alert","_error$response2","style","maxWidth","margin","padding","children","fileName","_jsxFileName","lineNumber","columnNumber","color","onSubmit","encType","map","display","marginBottom","charAt","toUpperCase","slice","type","onChange","required","width","marginTop","_c","$RefreshReg$"],"sources":["C:/Users/Selva/OneDrive/Desktop/New folder (2)/client/src/components/EditProfile.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\n\r\nfunction EditProfile() {\r\n    const { id } = useParams();\r\n    const navigate = useNavigate();\r\n    const [profileData, setProfileData] = useState({\r\n        name: '',\r\n        dept: '',\r\n        year: '',\r\n        sec: '',\r\n        email: '',\r\n        rollno: '',\r\n        roomno: '',\r\n        wardenname: '',\r\n    });\r\n    const [profileImage, setProfileImage] = useState(null);\r\n    const [errorMessage, setErrorMessage] = useState('');\r\n\r\n    useEffect(() => {\r\n        const fetchProfile = async () => {\r\n            const token = localStorage.getItem('token');\r\n            if (!token) {\r\n                console.error('No token found, redirecting to login...');\r\n                navigate('/login');\r\n                return;\r\n            }\r\n\r\n            try {\r\n                console.log(`Fetching profile for ID: ${id}`);\r\n                const response = await axios.get(`http://localhost:5000/api/profile/${id}`, {\r\n                    headers: {\r\n                        Authorization: `Bearer ${token}`,\r\n                    },\r\n                });\r\n                console.log('Profile fetched:', response.data);\r\n                setProfileData(response.data.Details);\r\n            } catch (error) {\r\n                console.error('Error fetching profile details:', error.response?.data || error.message);\r\n                setErrorMessage('Failed to fetch profile details. Please try again.');\r\n            }\r\n        };\r\n\r\n        fetchProfile();\r\n    }, [id, navigate]);\r\n\r\n    const handleChange = (e) => {\r\n        const { name, value } = e.target;\r\n        setProfileData((prevData) => ({\r\n            ...prevData,\r\n            [name]: value,\r\n        }));\r\n    };\r\n\r\n    const handleImageChange = (e) => {\r\n        setProfileImage(e.target.files[0]);\r\n        console.log('Selected file:', e.target.files[0]);\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        const token = localStorage.getItem('token');\r\n        if (!token) {\r\n            console.error('No token found, redirecting to login...');\r\n            navigate('/login');\r\n            return;\r\n        }\r\n\r\n        const formData = new FormData();\r\n        formData.append('profileImage', profileImage);\r\n        Object.keys(profileData).forEach((key) => {\r\n            formData.append(key, profileData[key]);\r\n        });\r\n\r\n        try {\r\n            console.log('Updating profile...');\r\n            const response = await axios.put(`http://localhost:5000/api/EditProfile/${id}`, formData, {\r\n                headers: {\r\n                    Authorization: `Bearer ${token}`,\r\n                    'Content-Type': 'multipart/form-data',\r\n                },\r\n            });\r\n            console.log('Profile updated:', response.data);\r\n            alert('Profile updated successfully!');\r\n            navigate(`/profile/${id}`);\r\n        } catch (error) {\r\n            console.error('Error updating profile:', error.response?.data || error.message);\r\n            setErrorMessage('Failed to update profile. Please try again.');\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div style={{ maxWidth: '600px', margin: '0 auto', padding: '1em' }}>\r\n            <h2>Edit Profile</h2>\r\n            {errorMessage && <p style={{ color: 'red' }}>{errorMessage}</p>}\r\n            <form onSubmit={handleSubmit} encType=\"multipart/form-data\">\r\n                {Object.keys(profileData).map((key) => (\r\n                    <label key={key} style={{ display: 'block', marginBottom: '1em' }}>\r\n                        {key.charAt(0).toUpperCase() + key.slice(1)}:\r\n                        <input\r\n                            type=\"text\"\r\n                            name={key}\r\n                            value={profileData[key]}\r\n                            onChange={handleChange}\r\n                            required\r\n                            style={{ width: '100%', padding: '0.5em', marginTop: '0.5em' }}\r\n                        />\r\n                    </label>\r\n                ))}\r\n                <label style={{ display: 'block', marginBottom: '1em' }}>\r\n                    Profile Image:\r\n                    <input\r\n                        type=\"file\"\r\n                        name=\"profileImage\"\r\n                        onChange={handleImageChange}\r\n                        style={{ marginTop: '0.5em' }}\r\n                    />\r\n                </label>\r\n                <button type=\"submit\" style={{ padding: '0.5em 1em' }}>\r\n                    Save Changes\r\n                </button>\r\n            </form>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default EditProfile;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}